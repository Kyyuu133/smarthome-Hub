<!DOCTYPE html>
<html>
<head>
    <title>Smart Home - Device History</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>ğŸ“‹ History for Device #{{ device_id }} 
        {% if events %}{{ events[0]["device_name"] }}{% endif %}
    </h1>

    <div class="navigation-links">
        <a href="/status/events/all_devices">â† All Devices</a>
        <a href="/status/events">â† Status Overview</a>
        <a href="/list">â† Rooms</a>
        <a href="/dashboard">ğŸ“Š Dashboard</a>
    </div>

    {% if events %}

        {% if device["device_type"] == "Heater" %}
        <h2>ğŸ”¥ Heater Events</h2>
        <table>
            <thead>
                <tr>
                    <th>Event ID</th>
                    <th>Device Name</th>
                    <th>Device ID</th>
                    <th>Status</th>
                    <th>Temp (Â°C)</th>
                    <th>Timestamp</th>
                </tr>
            </thead>
            <tbody>
                {% for e in events %}
                <tr>
                    <td>{{ e["event_id"] }}</td>
                    <td>{{ e["device_name"] }}</td>
                    <td>{{ e["device_id"] }}</td>
                    <td>{{ "âœ…" if e["device_status"] else "âŒ" }}</td>
                    <td>{{ e["temp_value"] }}</td>
                    <td>{{ e["event_timestamp"] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% elif device["device_type"] == "Lamp" %}
        <h2>ğŸ’¡ Lamp Events</h2>
        <table>
            <thead>
                <tr>
                    <th>Event ID</th>
                    <th>Device Name</th>
                    <th>Device ID</th>
                    <th>Status</th>
                    <th>Brightness (%)</th>
                    <th>Timestamp</th>
                </tr>
            </thead>
            <tbody>
                {% for e in events %}
                <tr>
                    <td>{{ e["event_id"] }}</td>
                    <td>{{ e["device_name"] }}</td>
                    <td>{{ e["device_id"] }}</td>
                    <td>{{ "âœ…" if e["device_status"] else "âŒ" }}</td>
                    <td>{{ e["brightness_value"] }}</td>
                    <td>{{ e["event_timestamp"] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

    {% else %}
    <div class="no-data">
        <p>No events found for this device.</p>
    </div>
    {% endif %}
</body>
</html>
