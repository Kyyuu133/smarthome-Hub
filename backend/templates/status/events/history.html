<!DOCTYPE html>
<html>
<head>
    <title>Smart Home - Event History</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>ğŸ“œ Full Event History</h1>
    
    <div class="navigation-links">
        <a href="/status/events/all_devices">All Devices</a>
        <a href="/status/events">â† Status Overview</a>
        <a href="/list">â† Rooms</a>
        <a href="/dashboard">ğŸ“Š Dashboard</a>
    </div>

    {% if events %}
        <div class="tables-container">
            <!-- Lamp Events -->
            <div class="table-section">
                <h2>ğŸ”¦ Lamp Events</h2>
                
                {% if lamp_total_pages > 1 %}
                <div class="pagination">
                    {% if lamp_page > 1 %}
                    <a href="?lamp_page=1&heater_page={{ heater_page }}">Â« First</a>
                    <a href="?lamp_page={{ lamp_page - 1 }}&heater_page={{ heater_page }}">â€¹ Prev</a>
                    {% else %}
                    <span class="disabled">Â« First</span>
                    <span class="disabled">â€¹ Prev</span>
                    {% endif %}
                    
                    <span class="current">{{ lamp_page }} / {{ lamp_total_pages }}</span>
                    
                    {% if lamp_page < lamp_total_pages %}
                    <a href="?lamp_page={{ lamp_page + 1 }}&heater_page={{ heater_page }}">Next â€º</a>
                    <a href="?lamp_page={{ lamp_total_pages }}&heater_page={{ heater_page }}">Last Â»</a>
                    {% else %}
                    <span class="disabled">Next â€º</span>
                    <span class="disabled">Last Â»</span>
                    {% endif %}
                </div>
                {% endif %}
                
                {% set lamps = lamp_events %}
                {% if lamps %}
                <table>
                    <thead>
                        <tr>
                            <th>Event ID</th>
                            <th>Device Name</th>
                            <th>Status</th>
                            <th>Brightness (%)</th>
                            <th>Timestamp</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for e in lamps %}
                        <tr>
                            <td>{{ e["event_id"] }}</td>
                            <td>{{ e["device_name"] }}</td>
                            <td>{{ "âœ…" if e["device_status"] else "âŒ" }}</td>
                            <td>{{ e["brightness_value"] }}</td>
                            <td>{{ e["event_timestamp"] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p>No lamp events found.</p>
                {% endif %}
            </div>

            <!-- Heater Events -->
            <div class="table-section">
                <h2>ğŸ”¥ Heater Events</h2>
                
                {% if heater_total_pages > 1 %}
                <div class="pagination">
                    {% if heater_page > 1 %}
                    <a href="?lamp_page={{ lamp_page }}&heater_page=1">Â« First</a>
                    <a href="?lamp_page={{ lamp_page }}&heater_page={{ heater_page - 1 }}">â€¹ Prev</a>
                    {% else %}
                    <span class="disabled">Â« First</span>
                    <span class="disabled">â€¹ Prev</span>
                    {% endif %}
                    
                    <span class="current">{{ heater_page }} / {{ heater_total_pages }}</span>
                    
                    {% if heater_page < heater_total_pages %}
                    <a href="?lamp_page={{ lamp_page }}&heater_page={{ heater_page + 1 }}">Next â€º</a>
                    <a href="?lamp_page={{ lamp_page }}&heater_page={{ heater_total_pages }}">Last Â»</a>
                    {% else %}
                    <span class="disabled">Next â€º</span>
                    <span class="disabled">Last Â»</span>
                    {% endif %}
                </div>
                {% endif %}
                
                {% set heaters = heater_events %}
                {% if heaters %}
                <table>
                    <thead>
                        <tr>
                            <th>Event ID</th>
                            <th>Device Name</th>
                            <th>Status</th>
                            <th>Temp (Â°C)</th>
                            <th>Timestamp</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for e in heaters %}
                        <tr>
                            <td>{{ e["event_id"] }}</td>
                            <td>{{ e["device_name"] }}</td>
                            <td>{{ "âœ…" if e["device_status"] else "âŒ" }}</td>
                            <td>{{ e["temp_value"] }}</td>
                            <td>{{ e["event_timestamp"] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p>No heater events found.</p>
                {% endif %}
            </div>
        </div>

    {% else %}
    <div class="no-data">
        <p>No events found.</p>
    </div>
    {% endif %}
</body>
</html>
