<!DOCTYPE html>
<html>
<head>
    <title>Current Device States</title>
</head>
<body>

<h2>Current Device States</h2>

<a href="/status/events/all_devices">Back to All Devices</a>
&nbsp;|&nbsp;
<a href="/status/events">Back to Status Overview</a>
&nbsp;|&nbsp;
<a href="/list">Back to Rooms</a>
&nbsp;|&nbsp;
<a href="/dashboard">Back to Dashboard</a>
<br>
<br>
{% if events %}
<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Device ID</th>
            <th>Status</th>
            <th>Name</th>
            <th>Device Type</th>
            <th>Temp (°C)</th>
            <th>Brightness (%)</th>
            <th>Timestamp</th>
            <th>History</th>
        </tr>
    </thead>
    <tbody>
        {% for e in events %}
        <tr>
            <td>{{ e["device_id"] }}</td>
            <td>{{ "✅" if e["device_status"] else "❌" }}</td>
            <td>{{ e["device_name"] }}</td>
            <td>{{ e["device_type"] }}</td>
            <td>{{ e["temp_value"] }}</td>
            <td>{{ e["brightness_value"] }}</td>
            <td>{{ e["event_timestamp"] }}</td>
            <td><a href="/status/events/device/history/{{ e['device_id'] }}">View History</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No events found.</p>
{% endif %}

</body>
</html>