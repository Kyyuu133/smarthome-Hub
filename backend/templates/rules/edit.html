<!DOCTYPE html>
<html>
<head>
    <title>Smart Home - Edit Rule</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>âœï¸ Edit Rule #{{ rule["rules_id"] }}</h1>
    
    <div class="rule-info">
        <h2>{{ rule["device_name"] or "Device" }}</h2>
        <p><strong>Type:</strong> {{ rule["device_type"] }}</p>
        <p><strong>Room:</strong> {{ rule["room_name"] or "N/A" }}</p>
        <p><strong>Rule ID:</strong> {{ rule["rules_id"] }}</p>
    </div>
    
    <div class="form-container">
        <form action="/rules/edit/{{ rule['rules_id'] }}" method="post">
            
            {% if rule["device_type"] == "Heater" %}
            <h3>ğŸŒ¡ï¸ Temperature Thresholds</h3>
            
            <div class="form-group">
                <label for="temp_treshold_high">Temperature High (Â°C):</label>
                <input type="number" 
                       id="temp_treshold_high" 
                       name="temp_treshold_high" 
                       value="{{ rule['temp_treshold_high'] if rule['temp_treshold_high'] else '0' }}"
                       placeholder="e.g., 25">
                <small>Heater will turn OFF when temperature exceeds this value</small>
            </div>
            
            <div class="form-group">
                <label for="temp_treshold_low">Temperature Low (Â°C):</label>
                <input type="number" 
                       id="temp_treshold_low" 
                       name="temp_treshold_low" 
                       value="{{ rule['temp_treshold_low'] if rule['temp_treshold_low'] else '0' }}"
                       placeholder="e.g., 18">
                <small>Heater will turn ON when temperature falls below this value</small>
            </div>
            
            <input type="hidden" name="brightness_treshold_high" value="0">
            <input type="hidden" name="brightness_treshold_low" value="0">
            
            {% elif rule["device_type"] == "Lamp" %}
            <h3>ğŸ’¡ Brightness Thresholds</h3>
            
            <div class="form-group">
                <label for="brightness_treshold_high">Brightness High (%):</label>
                <input type="number" 
                       id="brightness_treshold_high" 
                       name="brightness_treshold_high" 
                       min="0" 
                       max="100"
                       value="{{ rule['brightness_treshold_high'] if rule['brightness_treshold_high'] else '0' }}"
                       placeholder="e.g., 80">
                <small>Lamp will turn ON when brightness exceeds this percentage</small>
            </div>
            
            <div class="form-group">
                <label for="brightness_treshold_low">Brightness Low (%):</label>
                <input type="number" 
                       id="brightness_treshold_low" 
                       name="brightness_treshold_low" 
                       min="0" 
                       max="100"
                       value="{{ rule['brightness_treshold_low'] if rule['brightness_treshold_low'] else '0' }}"
                       placeholder="e.g., 20">
                <small>Lamp will turn OFF when brightness falls below this percentage</small>
            </div>
            
            <input type="hidden" name="temp_treshold_high" value="0">
            <input type="hidden" name="temp_treshold_low" value="0">
            {% endif %}
            
            <div class="btn-container">
                <button type="submit" class="btn-submit">âœ“ Save Changes</button>
                <a href="/rules/device/{{ rule['device_id'] }}" class="btn btn-cancel">âœ— Cancel</a>
            </div>
        </form>
    </div>

    <div class="navigation-links">
        <a href="/rules/device/{{ rule['device_id'] }}">â† Back to Device Rules</a>
        <a href="/rules/">ğŸ”§ Manage All Rules</a>
        <a href="/dashboard">ğŸ“Š Dashboard</a>
    </div>
</body>
</html>
