<!DOCTYPE html>
<html>
<head>
    <title>Smart Home - Rules for {{ device["device_name"] }}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>‚öôÔ∏è Rules for Device</h1>
    
    <div class="device-info">
        <h2>{{ device["device_name"] }}</h2>
        <p><strong>Type:</strong> {{ device["device_type"] }}</p>
        <p><strong>Room:</strong> {{ device["room_name"] }}</p>
        <p><strong>Status:</strong> {{ "ON" if device["device_status"] == 1 else "OFF" }}</p>
    </div>
    
    <a href="/rules/create/{{ device['device_id'] }}" class="btn btn-create">+ Create New Rule</a>
    
    <hr>
    <h2>Existing Rules</h2>
    
    {% if rules %}
        {% for rule in rules %}
        <div class="rule-card">
            <h3>Rule #{{ rule["rules_id"] }}</h3>
            <div class="rule-details">
                
                {% if device["device_type"] == "Heater" %}
                <!-- Temperature for Heaters -->
                <div class="rule-detail">
                    <label>üå°Ô∏è Temperature High Threshold:</label>
                    <value>{{ rule["temp_treshold_high"] }}¬∞C</value>
                </div>
                <div class="rule-detail">
                    <label>‚ùÑÔ∏è Temperature Low Threshold:</label>
                    <value>{{ rule["temp_treshold_low"] }}¬∞C</value>
                </div>
                
                {% elif device["device_type"] == "Lamp" %}
                <!-- Brightness for Lamps -->
                <div class="rule-detail">
                    <label>üí° Brightness High Threshold:</label>
                    <value>{{ rule["brightness_treshold_high"] }}%</value>
                </div>
                <div class="rule-detail">
                    <label>üåô Brightness Low Threshold:</label>
                    <value>{{ rule["brightness_treshold_low"] }}%</value>
                </div>
                {% endif %}
                
            </div>
            <div class="actions">
                <a href="/rules/edit/{{ rule['rules_id'] }}" class="btn btn-edit">Edit Rule</a>
                <form action="/rules/delete/{{ rule['rules_id'] }}" method="post" onsubmit="return confirm('Are you sure you want to delete this rule?');">
                    <button type="submit" class="btn btn-delete">Delete Rule</button>
                </form>
            </div>
        </div>
        {% endfor %}
    {% else %}
    <div class="no-rules">
        <h3>No Rules Yet</h3>
        <p>This device doesn't have any automation rules yet.</p>
        <p>Click "Create New Rule" above to add one!</p>
    </div>
    {% endif %}
    
    <div class="navigation-links">
        <a href="/devices/list/room?room_id={{ device['room_id'] }}">‚Üê Back to Device List</a>
        <a href="/rules/">üîß Manage All Rules</a>
        <a href="/dashboard">üìä Dashboard</a>
    </div>
</body>
</html>
